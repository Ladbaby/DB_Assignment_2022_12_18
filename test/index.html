<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
</head>

<body>
    <div id="register">
        <button>register</button>
        <div></div>
    </div>
    <div id="login">
        <button>login</button>
        <div></div>
    </div>
    <div id="getAlbum">
        <button>getAlbum</button>
        <pre></pre>
    </div>
    <div id="getArtist">
        <button>getartist</button>
        <pre></pre>
    </div>
    <script>
        let button_register = document.querySelector('div#register button');
        let button_login = document.querySelector('div#login button');
        let button_getAlbum = document.querySelector('div#getAlbum button');
        let button_getArtist = document.querySelector('div#getArtist button');

        const register_info = { 
            "auth": {
                "user-name": "cxk", 
                "password": "123456" 
            } 
        };
        button_register.addEventListener('click', function (){
            var req = new XMLHttpRequest();
            req.addEventListener('load', function(){
                document.querySelector('div#register div').innerHTML = "<p>done</p>";
            });
            req.open('POST', '/register');
            req.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
            req.send(JSON.stringify(register_info));
        });


        const login_info = {
            "auth": {
                "user-name": "ikun",
                "password": "12345678",
            }
        };
        button_login.addEventListener('click', function (){
            let req = new XMLHttpRequest();
            req.addEventListener('load', function(){
                document.querySelector('div#login div').innerHTML = "<p>done</p>";
            });
            req.open('POST', '/register');
            req.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
            req.send(JSON.stringify(login_info));
        });

        button_getAlbum.addEventListener('click', function(){
            let req = new XMLHttpRequest();
            req.addEventListener('load', function(){
                document.querySelector('div#getAlbum pre').innerHTML = JSON.stringify(JSON.parse(req.responseText), null, 4);
            });
            req.open('GET', '/search-album-id?target=114514');
            req.send();
        });

        button_getArtist.addEventListener('click', function() {
            let req = new XMLHttpRequest();
            req.addEventListener('load', function(){
                document.querySelector('div#getArtist pre').innerHTML = JSON.stringify(JSON.parse(req.responseText), null, 4);
            })
            req.open('GET', '/search-artist?target=artist-name');
            req.send();
        });


    </script>
</body>

</html>